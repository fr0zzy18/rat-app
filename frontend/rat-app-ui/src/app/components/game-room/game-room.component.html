<div class="game-room-container">
  <h1>Bingo Game</h1>

  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
  </div>

  <div *ngIf="winnerMessage" class="winner-message alert alert-success">
    {{ winnerMessage }}
  </div>

  <!-- New: Game Paused Message -->
  <div *ngIf="isGamePaused" class="game-paused-message alert alert-warning">
    Game Paused. Waiting for players to reconnect.
  </div>

  <!-- Show/Hide Game ID section (only for creator if P2 not joined and game not finished) -->
  <div *ngIf="isGameCreator && !isPlayer2Joined && !isGameFinished" class="game-id-section">
    <button (click)="toggleGameIdVisibility()" class="show-hide-id-button">
      {{ showGameIdSection ? 'Hide Game ID' : 'Show Game ID' }}
    </button>
    <div *ngIf="showGameIdSection" class="game-id-display">
      <span class="game-id-text">Game ID: {{ gameId }}</span>
      <button (click)="copyGameIdToClipboard()" class="copy-button">Copy</button>
      <span *ngIf="copyFeedbackMessage" class="copy-feedback">{{ copyFeedbackMessage }}</span>
    </div>
  </div>
  <!-- End Show/Hide Game ID -->

  <!-- Timer display (appears when P2 joined and game not finished) -->
  <div *ngIf="isPlayer2Joined && !isGameFinished && !isGamePaused" class="game-timer-section">
    <span class="game-timer-label">Game Duration:</span>
    <span class="game-timer-value">{{ displayTimer }}</span>
  </div>
  <!-- End Timer -->

  <div class="boards-wrapper" [class.game-finished]="isGameFinished" [class.game-paused]="isGamePaused">
    <div class="player-board-section">
      <h2>{{ myBoardDisplayName }}</h2>
      <div class="game-board">
        <div *ngFor="let row of gameBoard; let i = index" class="board-row">
          <div
            *ngFor="let cell of row; let j = index"
            class="board-cell"
            [class.empty]="cell.isEmpty"
            [class.checked]="cell.isChecked"
            (click)="toggleCellChecked(cell)">
            <span *ngIf="cell.phrase">{{ cell.phrase }}</span>
            <span *ngIf="cell.isEmpty" class="empty-text">FREE</span>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="opponentSelectedCards.length > 0" class="opponent-board-section">
      <h2>{{ opponentBoardDisplayName }}</h2>
      <div class="game-board opponent-board">
        <div *ngFor="let row of opponentGameBoard; let i = index" class="board-row">
          <div
            *ngFor="let cell of row; let j = index"
            class="board-cell"
            [class.empty]="cell.isEmpty"
            [class.checked]="cell.isChecked"> <!-- Opponent's own checked cells -->
            <span *ngIf="cell.phrase">{{ cell.phrase }}</span>
            <span *ngIf="cell.isEmpty" class="empty-text">FREE</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <button *ngIf="isGameFinished" (click)="goBackToBingo()" class="back-button">Back to Bingo Selection</button>
</div>
